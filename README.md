# SubConverter Go ç‰ˆæœ¬\n\n[![CI/CD Pipeline](https://github.com/username/subconverter-go/actions/workflows/ci.yml/badge.svg)](https://github.com/username/subconverter-go/actions/workflows/ci.yml)\n[![Go Report Card](https://goreportcard.com/badge/github.com/username/subconverter-go)](https://goreportcard.com/report/github.com/username/subconverter-go)\n[![codecov](https://codecov.io/gh/username/subconverter-go/branch/main/graph/badge.svg)](https://codecov.io/gh/username/subconverter-go)\n[![License](https://img.shields.io/github/license/username/subconverter-go)](LICENSE)\n[![GitHub release](https://img.shields.io/github/release/username/subconverter-go.svg)](https://github.com/username/subconverter-go/releases)\n\n**SubConverter** çš„ Go è¯­è¨€é‡å†™ç‰ˆæœ¬ï¼Œæä¾›é«˜æ€§èƒ½çš„è®¢é˜…è½¬æ¢æœåŠ¡ï¼Œå®Œå…¨å…¼å®¹åŸæœ‰ C++ ç‰ˆæœ¬çš„ API å’ŒåŠŸèƒ½ã€‚\n\n## ğŸ“‹ ç‰¹æ€§\n\n- ğŸš€ **é«˜æ€§èƒ½**: åˆ©ç”¨ Go å¹¶å‘ç‰¹æ€§ï¼Œå¤„ç†é€Ÿåº¦æ˜¾è‘—æå‡\n- ğŸ”„ **å®Œå…¨å…¼å®¹**: ä¸ C++ ç‰ˆæœ¬ 100% API å…¼å®¹ï¼Œæ— ç¼è¿ç§»\n- ğŸ“¦ **å•æ–‡ä»¶éƒ¨ç½²**: ç¼–è¯‘åçš„å•ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œéƒ¨ç½²ç®€å•\n- ğŸ³ **å®¹å™¨åŒ–æ”¯æŒ**: æä¾› Docker é•œåƒï¼Œæ”¯æŒå®¹å™¨åŒ–éƒ¨ç½²\n- ğŸŒ **å¤šå®¢æˆ·ç«¯æ”¯æŒ**: æ”¯æŒ Clashã€Surgeã€QuantumultXã€Loonã€SingBox ç­‰\n- ğŸ¯ **æ¨¡æ¿ç³»ç»Ÿ**: å…¼å®¹ç°æœ‰ Jinja2 æ¨¡æ¿ï¼Œæ”¯æŒè‡ªå®šä¹‰é…ç½®\n- ğŸ“Š **ç›‘æ§é›†æˆ**: å†…ç½® Prometheus æŒ‡æ ‡å’Œå¥åº·æ£€æŸ¥\n- ğŸ”’ **å®‰å…¨åŠ å›º**: æ”¯æŒè®¿é—®ä»¤ç‰Œã€é€Ÿç‡é™åˆ¶ç­‰å®‰å…¨ç‰¹æ€§\n\n## ğŸ“– æ”¯æŒçš„å®¢æˆ·ç«¯\n\n| å®¢æˆ·ç«¯ | é…ç½®æ ¼å¼ | çŠ¶æ€ |\n|--------|----------|------|\n| Clash | YAML | âœ… æ”¯æŒ |\n| Surge | Config | âœ… æ”¯æŒ |\n| QuantumultX | Config | âœ… æ”¯æŒ |\n| Loon | Config | âœ… æ”¯æŒ |\n| SingBox | JSON | âœ… æ”¯æŒ |\n| Shadowrocket | Config | ğŸš§ å¼€å‘ä¸­ |\n\n## ğŸš€ å¿«é€Ÿå¼€å§‹\n\n### ä¸‹è½½é¢„ç¼–è¯‘ç‰ˆæœ¬\n\n ä» [Releases](https://github.com/username/subconverter-go/releases) é¡µé¢ä¸‹è½½é€‚åˆæ‚¨ç³»ç»Ÿçš„é¢„ç¼–è¯‘ç‰ˆæœ¬ã€‚\n\n### ä½¿ç”¨ Docker\n\n`bash\n# æ‹‰å–é•œåƒ\ndocker pull ghcr.io/username/subconverter-go:latest\n\n# è¿è¡Œå®¹å™¨\ndocker run -d \\\n  --name subconverter-go \\\n  -p 25500:25500 \\\n  ghcr.io/username/subconverter-go:latest\n`\n\n### ä»æºç æ„å»º\n\n`bash\n# å…‹éš†ä»“åº“\ngit clone https://github.com/username/subconverter-go.git\ncd subconverter-go\n\n# æ„å»º\nmake build\n\n# è¿è¡Œ\n./bin/subconverter-go\n`\n\n## ğŸ”§ é…ç½®\n\n### ç¯å¢ƒå˜é‡é…ç½®\n\n`bash\n# æœåŠ¡é…ç½®\nexport SC_SERVER_HOST=0.0.0.0\nexport SC_SERVER_PORT=25500\n\n# æ—¥å¿—é…ç½®\nexport SC_LOG_LEVEL=info\nexport SC_LOG_FORMAT=json\n\n# ç¼“å­˜é…ç½®\nexport SC_CACHE_ENABLE=true\nexport SC_CACHE_DEFAULT_TTL=10m\n\n# å®‰å…¨é…ç½®\nexport SC_ACCESS_TOKEN=your-secret-token\nexport SC_RATE_LIMIT=100\n`\n\n### é…ç½®æ–‡ä»¶\n\n åˆ›å»º `configs/config.yaml` æ–‡ä»¶ï¼š\n\n`yaml\nserver:\n  host: \"0.0.0.0\"\n  port: 25500\n\nlog:\n  level: \"info\"\n  format: \"text\"\n\ncache:\n  enable: true\n  default_ttl: \"10m\"\n\n# æ›´å¤šé…ç½®é€‰é¡¹è¯·å‚è€ƒ configs/config.yaml\n`\n\n## ğŸ“š API æ–‡æ¡£\n\n### è®¢é˜…è½¬æ¢\n\n`bash\n# åŸºç¡€è½¬æ¢\ncurl \"http://localhost:25500/sub?target=clash&url=https://your-subscription-url\"\n\n# å¸¦é…ç½®æ–‡ä»¶\ncurl \"http://localhost:25500/sub?target=surge&url=https://your-subscription-url&config=https://config-url\"\n\n# èŠ‚ç‚¹è¿‡æ»¤\ncurl \"http://localhost:25500/sub?target=clash&url=https://your-subscription-url&include=é¦™æ¸¯&exclude=æµ‹è¯•\"\n`\n\n### æ”¯æŒçš„å‚æ•°\n\n| å‚æ•° | æè¿° | ç¤ºä¾‹ |\n|------|------|------|\n| `target` | ç›®æ ‡å®¢æˆ·ç«¯ç±»å‹ | `clash`, `surge`, `quantumult-x` |\n| `url` | è®¢é˜…é“¾æ¥ | `https://example.com/sub` |\n| `config` | å¤–éƒ¨é…ç½®æ–‡ä»¶ | `https://example.com/config.ini` |\n| `include` | åŒ…å«è¿‡æ»¤å™¨ | `é¦™æ¸¯|ç¾å›½` |\n| `exclude` | æ’é™¤è¿‡æ»¤å™¨ | `æµ‹è¯•|åˆ°æœŸ` |\n| `emoji` | æ·»åŠ  emoji | `true`, `false` |\n| `sort` | èŠ‚ç‚¹æ’åº | `true`, `false` |\n\n### å…¶ä»– API\n\n`bash\n# è·å–ç‰ˆæœ¬ä¿¡æ¯\ncurl \"http://localhost:25500/version\"\n\n# å¥åº·æ£€æŸ¥\ncurl \"http://localhost:25500/health\"\n\n# è·å–è§„åˆ™é›†\ncurl \"http://localhost:25500/getruleset?type=clash&group=media\"\n\n# Prometheus æŒ‡æ ‡\ncurl \"http://localhost:25500/metrics\"\n`\n\n## ğŸ› ï¸ å¼€å‘\n\n### ç¯å¢ƒè¦æ±‚\n\n- Go 1.19+\n- Make\n- Docker (å¯é€‰)\n\n### å¼€å‘å‘½ä»¤\n\n`bash\n# å®‰è£…ä¾èµ–\nmake deps\n\n# ä»£ç æ£€æŸ¥\nmake lint\n\n# è¿è¡Œæµ‹è¯•\nmake test\n\n# å¯åŠ¨å¼€å‘æ¨¡å¼ï¼ˆçƒ­é‡è½½ï¼‰\nmake dev\n\n# æ„å»ºæ‰€æœ‰å¹³å°ç‰ˆæœ¬\nmake build-all\n\n# æ„å»º Docker é•œåƒ\nmake docker-build\n`\n\n### é¡¹ç›®ç»“æ„\n\n`\nsubconverter-go/\nâ”œâ”€â”€ cmd/                    # åº”ç”¨ç¨‹åºå…¥å£\nâ”œâ”€â”€ internal/              # å†…éƒ¨åŒ…\nâ”‚   â”œâ”€â”€ api/               # HTTP API å±‚\nâ”‚   â”œâ”€â”€ service/           # ä¸šåŠ¡é€»è¾‘å±‚\nâ”‚   â”œâ”€â”€ parser/            # è§£æå™¨æ¨¡å—\nâ”‚   â”œâ”€â”€ generator/         # ç”Ÿæˆå™¨æ¨¡å—\nâ”‚   â””â”€â”€ config/            # é…ç½®ç®¡ç†\nâ”œâ”€â”€ pkg/                   # å¯å¯¹å¤–æš´éœ²çš„åŒ…\nâ”‚   â”œâ”€â”€ models/            # æ•°æ®æ¨¡å‹\nâ”‚   â””â”€â”€ types/             # ç±»å‹å®šä¹‰\nâ”œâ”€â”€ configs/               # é…ç½®æ–‡ä»¶\nâ”œâ”€â”€ templates/             # æ¨¡æ¿æ–‡ä»¶\nâ”œâ”€â”€ assets/                # é™æ€èµ„æº\nâ””â”€â”€ test/                  # æµ‹è¯•æ–‡ä»¶\n`\n\n## ğŸ³ Docker éƒ¨ç½²\n\n### åŸºç¡€éƒ¨ç½²\n\n`bash\n# ä½¿ç”¨ docker-compose\ncd docker\ndocker-compose up -d\n`\n\n### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²\n\n`yaml\n# docker-compose.yml\nversion: '3.8'\nservices:\n  subconverter-go:\n    image: ghcr.io/username/subconverter-go:latest\n    ports:\n      - \"25500:25500\"\n    environment:\n      - SC_LOG_LEVEL=info\n      - SC_CACHE_ENABLE=true\n      - SC_ACCESS_TOKEN=your-secret-token\n    volumes:\n      - ./config.yaml:/app/configs/config.yaml:ro\n      - ./templates:/app/templates:ro\n    restart: unless-stopped\n`\n\n## âš¡ æ€§èƒ½ä¼˜åŒ–\n\n### ç¼“å­˜é…ç½®\n\n`yaml\ncache:\n  enable: true\n  default_ttl: \"10m\"\n  max_entries: 1000\n  cleanup_time: \"1m\"\n`\n\n### å¹¶å‘è®¾ç½®\n\n`yaml\nserver:\n  max_connections: 1000\n  read_timeout: \"30s\"\n  write_timeout: \"30s\"\n`\n\n### èµ„æºé™åˆ¶\n\n`bash\n# Docker èµ„æºé™åˆ¶\ndocker run -d \\\n  --name subconverter-go \\\n  --memory=512m \\\n  --cpus=1.0 \\\n  -p 25500:25500 \\\n  ghcr.io/username/subconverter-go:latest\n`\n\n## ğŸ”’ å®‰å…¨å»ºè®®\n\n1. **ä½¿ç”¨è®¿é—®ä»¤ç‰Œ**: è®¾ç½® `SC_ACCESS_TOKEN` ç¯å¢ƒå˜é‡\n2. **å¯ç”¨é€Ÿç‡é™åˆ¶**: é…ç½® `rate_limit` å‚æ•°\n3. **HTTPS éƒ¨ç½²**: ä½¿ç”¨åå‘ä»£ç†å¯ç”¨ HTTPS\n4. **å®šæœŸæ›´æ–°**: ä¿æŒç‰ˆæœ¬æ›´æ–°ä»¥è·å–å®‰å…¨ä¿®å¤\n\n## ğŸ“ˆ ç›‘æ§\n\n### Prometheus æŒ‡æ ‡\n\n è®¿é—® `http://localhost:25500/metrics` è·å–ç›‘æ§æŒ‡æ ‡ï¼š\n\n- `subconverter_requests_total`: è¯·æ±‚æ€»æ•°\n- `subconverter_request_duration_seconds`: è¯·æ±‚å¤„ç†æ—¶é—´\n- `subconverter_cache_hits_total`: ç¼“å­˜å‘½ä¸­æ¬¡æ•°\n- `subconverter_active_connections`: æ´»è·ƒè¿æ¥æ•°\n\n### å¥åº·æ£€æŸ¥\n\n```bash\n# å¥åº·æ£€æŸ¥ç«¯ç‚¹\ncurl http://localhost:25500/health\n\n# å“åº”ç¤ºä¾‹\n{\n \"status\": \"ok\",\n \"time\": 1640995200,\n
